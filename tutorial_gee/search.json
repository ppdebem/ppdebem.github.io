[
  {
    "objectID": "basicos/basicos_4.html",
    "href": "basicos/basicos_4.html",
    "title": "Operações entre bandas",
    "section": "",
    "text": "Já sabemos como filtrar as bandas em uma coleção de imagens. Para isola-las o processo é similar:\nvar landsat = ee.ImageCollection('LANDSAT/LC08/C02/T1_L2')\n              .filterBounds(area)\n              .filterDate(\"2021-07-01\", \"2021-07-31\");\n              \nvar img = landsat.first(); // Escolhendo somente a primeira imagem da coleção\n\nvar red = img.select('SR_B4');\nvar nir = img.select('SR_B5');\nNote que desta vez usamos a função select depois de selecionar a primeira imagem da coleção. Essa função funciona tanto em coleções quanto imagens isoladas."
  },
  {
    "objectID": "basicos/basicos_4.html#isolando-bandas",
    "href": "basicos/basicos_4.html#isolando-bandas",
    "title": "Operações entre bandas",
    "section": "",
    "text": "Já sabemos como filtrar as bandas em uma coleção de imagens. Para isola-las o processo é similar:\nvar landsat = ee.ImageCollection('LANDSAT/LC08/C02/T1_L2')\n              .filterBounds(area)\n              .filterDate(\"2021-07-01\", \"2021-07-31\");\n              \nvar img = landsat.first(); // Escolhendo somente a primeira imagem da coleção\n\nvar red = img.select('SR_B4');\nvar nir = img.select('SR_B5');\nNote que desta vez usamos a função select depois de selecionar a primeira imagem da coleção. Essa função funciona tanto em coleções quanto imagens isoladas."
  },
  {
    "objectID": "basicos/basicos_4.html#matemática-de-imagens",
    "href": "basicos/basicos_4.html#matemática-de-imagens",
    "title": "Operações entre bandas",
    "section": "Matemática de imagens",
    "text": "Matemática de imagens\nJá usamos as funções multiply e add para multiplicar e somar valores fixos às imagens. Estas funções matemáticas também podem ser usadas para multiplicar e somar bandas inteiras. Tomemos a função de cálculo do NDVI como exemplo:\n\\[\nNDVI = \\frac{(NIR - RED)}{(NIR + RED)}\n\\]\nTraduzindo a função para javascript com as variáveis criadas anteriormente, temos o seguinte:\nvar landsat = ee.ImageCollection('LANDSAT/LC08/C02/T1_L2')\n              .filterBounds(area)\n              .filterDate(\"2021-07-01\", \"2021-07-31\");\n              \nvar img = landsat.first(); // Escolhendo somente a primeira imagem da coleção\n\nvar red = img.select('SR_B4');\nvar nir = img.select('SR_B5');\n\nvar ndvi = nir.subtract(red).divide(nir.add(red))\n\n\n\n\n\n\nAtenção\n\n\n\nObserve que desta vez não convertemos os valores das imagens para seus valores reais pois não há necessidade conforme a fórmula do NDVI. Verifique se a fórmula que se deseja aplicar é sensível ao tipo de valor encontrado nas imagens."
  },
  {
    "objectID": "basicos/basicos_4.html#adicionando-a-imagem-ao-mapa",
    "href": "basicos/basicos_4.html#adicionando-a-imagem-ao-mapa",
    "title": "Operações entre bandas",
    "section": "Adicionando a imagem ao mapa",
    "text": "Adicionando a imagem ao mapa\nJuntando o que aprendemos nos passos anteriores podemos agora adicionar tanto a imagem RGB quanto a imagem NDVI calculada. Varias imagens podem ser adicionadas ao mesmo mapa usando a função Map.addLayer que já é conhecida. Observe que por ser uma imagem de apenas uma banda a imagem NDVI requer o parâmetro palette entre seus parâmetros de visualização. Neste caso usamos uma lista com os valores de “vermelho”, “amarelo” e “verde” que correspondem a valores baixos, medianos e altos respectivamente.\nvar landsat = ee.ImageCollection('LANDSAT/LC08/C02/T1_L2')\n              .filterBounds(area)\n              .filterDate(\"2021-07-01\", \"2021-07-31\");\n              \nvar img = landsat.first(); // Escolhendo somente a primeira imagem da coleção\n\nvar red = img.select('SR_B4');\nvar nir = img.select('SR_B5');\n\nvar ndvi = nir.subtract(red).divide(nir.add(red))\n\nvar visRGB = {\n  bands: ['SR_B4', 'SR_B3', 'SR_B2'],\n  min: 0.01,\n  max: 0.2,\n};\n\nvar visNDVI = {\n  min: 0,\n  max: 0.5,\n  palette: ['red', 'yellow', 'green']\n};\n\nMap.centerObject(area);\nMap.addLayer(img.multiply(2.75e-05).add(-0.2), visRGB, 'Imagem RGB');\nMap.addLayer(ndvi, visNDVI, 'NDVI');\nPodemos escolher quais imagens queremos visualizar usando as opções de Layer no canto superior direito do painel com o mapa."
  },
  {
    "objectID": "intermediarios/inter_1.html",
    "href": "intermediarios/inter_1.html",
    "title": "Criando suas próprias funções",
    "section": "",
    "text": "Em construção."
  },
  {
    "objectID": "intermediarios/inter_2.html",
    "href": "intermediarios/inter_2.html",
    "title": "A função map",
    "section": "",
    "text": "Em construção."
  },
  {
    "objectID": "basicos/basicos_3.html",
    "href": "basicos/basicos_3.html",
    "title": "Exibição de imagens",
    "section": "",
    "text": "Para fim de exemplo, vamos selecionar somente as bandas RGB da coleção filtrada utilizando a função select que aceita um nome de banda ou uma lista de nomes:\n\n\n\n\n\n\nListas\n\n\n\n\n\nEm javascript listas são denotadas por nomes ou objetos entre colchetes ([ ]), por exemplo:\nvar bandas_rgb = ['SR_B2', 'SR_B3', 'SR_B4']\n\n\n\nvar landsat = ee.ImageCollection('LANDSAT/LC08/C02/T1_L2')\n              .filterBounds(area)\n              .filterDate(\"2021-07-01\", \"2021-07-31\");\n              \nvar landsatRGB = landsat.select(['SR_B2', 'SR_B3', 'SR_B4']);"
  },
  {
    "objectID": "basicos/basicos_3.html#seleção-de-bandas",
    "href": "basicos/basicos_3.html#seleção-de-bandas",
    "title": "Exibição de imagens",
    "section": "",
    "text": "Para fim de exemplo, vamos selecionar somente as bandas RGB da coleção filtrada utilizando a função select que aceita um nome de banda ou uma lista de nomes:\n\n\n\n\n\n\nListas\n\n\n\n\n\nEm javascript listas são denotadas por nomes ou objetos entre colchetes ([ ]), por exemplo:\nvar bandas_rgb = ['SR_B2', 'SR_B3', 'SR_B4']\n\n\n\nvar landsat = ee.ImageCollection('LANDSAT/LC08/C02/T1_L2')\n              .filterBounds(area)\n              .filterDate(\"2021-07-01\", \"2021-07-31\");\n              \nvar landsatRGB = landsat.select(['SR_B2', 'SR_B3', 'SR_B4']);"
  },
  {
    "objectID": "basicos/basicos_3.html#extraindo-a-primeira-imagem-da-coleção",
    "href": "basicos/basicos_3.html#extraindo-a-primeira-imagem-da-coleção",
    "title": "Exibição de imagens",
    "section": "Extraindo a primeira imagem da coleção",
    "text": "Extraindo a primeira imagem da coleção\nNão precisamos das duas imagens do mês, então podemos selecionar a primeira delas usando a função first sem nenhum parâmetro:\nvar landsat = ee.ImageCollection('LANDSAT/LC08/C02/T1_L2')\n              .filterBounds(area)\n              .filterDate(\"2021-07-01\", \"2021-07-31\");\n              \nvar landsatRGB = landsat.select(['SR_B2', 'SR_B3', 'SR_B4']);\n\nvar landsat_primeira_julho = landsatRGB.first();"
  },
  {
    "objectID": "basicos/basicos_3.html#ajuste-de-valores-das-imagens",
    "href": "basicos/basicos_3.html#ajuste-de-valores-das-imagens",
    "title": "Exibição de imagens",
    "section": "Ajuste de valores das imagens",
    "text": "Ajuste de valores das imagens\nComo visto na seção anterior, as imagens não apresentam seus valores reais. Sabemos que para as imagens Landsat 8, as bandas 1 a 7 tem um valor de scale igual a 2.75 * 10-5 e um offset de -0.2, então Podemos então ajustar os valores através das funções de multiplicação e adição multiply e add:\nvar landsat = ee.ImageCollection('LANDSAT/LC08/C02/T1_L2')\n              .filterBounds(area)\n              .filterDate(\"2021-07-01\", \"2021-07-31\");\n              \nvar landsatRGB = landsat.select(['SR_B2', 'SR_B3', 'SR_B4']);\n\nvar landsat_primeira_julho = landsatRGB.first().multiply(0.0000275).add(-0.2);\n// Observação: notações cientificas podem ser usadas, isto é, 0.0000275 = 2.75e-05 \n\n\n\n\n\n\nOperações matemáticas em imagens\n\n\n\nÉ importante mencionar que sempre que for necessário realizar operações matemáticas a imagens isto deve ser feito utilizando as funções especificas da plataforma Earth Engine tais como multiply, add e divide:\n// Errado, não funciona\nvar imagem_multiplicada = imagem * 2\n\n// Correto\nvar imagem_multiplicada = imagem.multiply(2)\nOs meios tradicionais de realização de operações são reservados para objetos simples como números."
  },
  {
    "objectID": "basicos/basicos_3.html#definição-dos-parâmetros-de-visualização",
    "href": "basicos/basicos_3.html#definição-dos-parâmetros-de-visualização",
    "title": "Exibição de imagens",
    "section": "Definição dos parâmetros de visualização",
    "text": "Definição dos parâmetros de visualização\nAntes de exibir a imagem, precisamos definir os parâmetros de visualização tais como as bandas a serem usadas na composição RGB e seus valores mínimos e máximos:\nvar visualizacao = {\n  bands: ['SR_B4', 'SR_B3', 'SR_B2'], // Sequencia de bandas RGB\n  min: 0.01, // Valores mínimo e máximo associados à intensidade das cores  \n  max: 0.2, //\n};\n\n\n\n\n\n\nDicionários\n\n\n\n\n\nEm javascript listas são denotadas por pares variável: valor separados por vírgula e inseridos entre chaves ({ }), como observado na variável visualizacao no bloco anterior.\nDicionários podem ser utilizados para definição de parâmetros dentro de funções."
  },
  {
    "objectID": "basicos/basicos_3.html#funções-de-mapa",
    "href": "basicos/basicos_3.html#funções-de-mapa",
    "title": "Exibição de imagens",
    "section": "Funções de mapa",
    "text": "Funções de mapa\nFinalmente, podemos centralizar o mapa na região de interesse usando a função Map.centerObject e adicionar a imagem usando a função Map.Addlayer que tem como parâmetros a imagem a ser exibida, os parâmetros de visualização e um nome para exibição na legenda. Juntando tudo até agora, temos o código a seguir:\nvar landsat = ee.ImageCollection('LANDSAT/LC08/C02/T1_L2')\n              .filterBounds(area)\n              .filterDate(\"2021-07-01\", \"2021-07-31\");\n              \nvar landsatRGB = landsat.select(['SR_B2', 'SR_B3', 'SR_B4']);\n\nvar landsat_primeira_julho = landsatRGB.first().multiply(0.0000275).add(-0.2);\n\nvar visualizacao = {\n  bands: ['SR_B4', 'SR_B3', 'SR_B2'],\n  min: 0.01,\n  max: 0.2,\n};\n\nMap.centerObject(area)\n\nMap.addLayer(landsat_primeira_julho, visualizacao, 'Composição RGB Verdadeira');\n\n\n\n\n\n\n\n\n\n\n\nDica\n\n\n\nSe não tiver certeza de valores para os parâmetros min e max de visualização, clique nas opções da camada no painel do mapa e selecione uma das opções valor automático, por exemplo a opção Stretch: 98%:\n\n\n\n\n\nInsira os valores calculados automaticamente nas variáveis para mante-los na próxima vez que executar o código."
  }
]